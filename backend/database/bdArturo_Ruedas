


-- Crear tabla usuario
CREATE TABLE usuario (
    ID_usuario SERIAL PRIMARY KEY,
    nombre VARCHAR(25) NOT NULL,
    correo VARCHAR(50) NOT NULL,
    contraseña VARCHAR(25) NOT NULL,
    telefono VARCHAR(10) NOT NULL,
    foto VARCHAR(1000) NOT NULL
  );



-- Crear tabla usuario administrador
CREATE TABLE usuarioadmin (
    ID_administrador SERIAL PRIMARY KEY,
    usuario VARCHAR(20) NOT NULL,
    contraseña VARCHAR(25) NOT NULL,
    contraseña2 VARCHAR(25) NOT NULL
)

--usuario administrador
INSERT INTO usuarioadmin ( usuario, contraseña, contraseña2)
    VALUES ('123', '123', '123')


-- Crear tabla com_ventas
CREATE TABLE com_ventas (
    ID_publicacion SERIAL PRIMARY KEY,
    nombre_Articulo VARCHAR(25) NOT NULL,
    precio VARCHAR(25) NOT NULL,
    descripcion VARCHAR(500) NOT NULL,
    tipo_bicicleta VARCHAR(50),
    tipo_componente VARCHAR(50),
    ID_usuario INTEGER NOT NULL,
    CONSTRAINT fk_usuario_ventas FOREIGN KEY (ID_usuario) REFERENCES usuario(ID_usuario)
);

CREATE TABLE com_ventas_fotos (
    ID_foto SERIAL PRIMARY KEY,
    ID_publicacion INTEGER NOT NULL,
    url_foto VARCHAR(1000) NOT NULL,
    CONSTRAINT fk_publicacion_fotos FOREIGN KEY (ID_publicacion) REFERENCES com_ventas(ID_publicacion) ON DELETE CASCADE
);





-- Crear tabla carrito 
CREATE TABLE carrito (
    ID_carrito SERIAL PRIMARY KEY,
    ID_publicacion INTEGER NOT NULL,
    ID_usuario INTEGER NOT NULL,
    ID_vendedor INTEGER,
    CONSTRAINT fk_ID_publicacion FOREIGN KEY (ID_publicacion) 
        REFERENCES com_ventas(ID_publicacion) 
        ON DELETE CASCADE,  
    CONSTRAINT fk_ID_usuario FOREIGN KEY (ID_usuario) 
        REFERENCES usuario(ID_usuario),
    CONSTRAINT fk_vendedor FOREIGN KEY (ID_vendedor) 
        REFERENCES usuario(ID_usuario)
);

CREATE TABLE IF NOT EXISTS user_tokens (
    ID SERIAL PRIMARY KEY,
    ID_usuario INT NOT NULL,
    token TEXT UNIQUE NOT NULL,
    fecha_registro TIMESTAMP DEFAULT NOW(),
    CONSTRAINT fk_usuario FOREIGN KEY (ID_usuario)
        REFERENCES usuario (ID_usuario) ON DELETE CASCADE
);


SELECT * FROM usuario